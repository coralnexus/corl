#!/usr/bin/env ruby

Signal.trap("INT") { exit 1 }

#---

require 'corl'

# Set version info

module Nucleon; module Util; module CLI
class Parser
  def version
    version = CORL.VERSION
    "CORL: #{version}  (Apache License, Version 2.0)  --  https://github.com/coralnexus/corl/tree/v#{version}"  
  end
end
end; end; end

# Execute

if ! CORL.admin? && nucleon_locate(:vagrant) && ! ARGV.include?('--version')
  system(*[ 'vagrant', 'corl', ARGV ].flatten)
  exit($?.exitstatus)
else
  exit(CORL.executable(ARGV, :corl))  
end
