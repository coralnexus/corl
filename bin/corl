#!/usr/bin/env ruby

require 'corl'

# Set version info

module Nucleon; module Util; module CLI
class Parser
  def version
    version = CORL.VERSION
    "CORL: #{version}  (Apache License, Version 2.0)  --  https://github.com/coralnexus/corl/tree/v#{version}"  
  end
end
end; end; end

# Execute

internal_exec = ( CORL.admin? || ARGV.include?('--version') || ARGV.include?('-h') || ARGV.include?('--help') )

if ! internal_exec && nucleon_locate(:vagrant)
  system(*[ 'vagrant', 'corl', ARGV ].flatten)
  exit($?.exitstatus)
else
  exit(CORL.executable(ARGV, :corl))  
end
